# smartmailbox
IoT based smart mailbox with arduino + RFID tags + Azure
----------------------------
**Device Code**
----------------------------
REFERENCES - The PIR sensor code was based on  http://RandomNerdTutorials.com/pirsensor
------------------------
This folder provides the code for the Arduino Mega 2560 with ESP8266 WiFi module, RC522 RFID reader and PIR sensor.
You will need the RFID library from https://github.com/song940/RFID-RC522/blob/master/RFID.h
Configuration steps provided in Configration.txt
------------------------
**Cloud Code**
------------------------

- *azure function*
REFERENCES - Twilio code from https://www.twilio.com/docs/libraries/csharp-dotnet
----------------
-- This folder provides the code for azure functions that is processing the incoming message. Function1.cs file provides all the functionalities for this function. It calls the machine learning module hosted in
Azure Container services. You will need to open the csproj in Visual Studio 2017 and restore packages to use this folder.
Configuration steps provided in Configration.txt
- *webapp_and_gateway*
REFERENCES - Almost all of the files were generated by Visual Studio. I've highlighted the classes I added/modified below.
---------------------
-- This is an ASP.Net website. The files I added are in the Controllers, Models and Views\Home and Views\Mail folders. You will need to open
this file in Visual Studio 2017 and restore all packages before running.
HomeController - this acts as gateway for messages sent from Arduino since the ESP8266 does not support certs which means I could not connect
directly to AzureIoT hub from the device.
MailController - This is the code for the UI so users can view their incoming mail and classify them.
Configuration steps provided in Configration.txt
- *machine_learning_module*
REFERENCES - The python files in this folder are based on the Anomaly Detection Tutorial provided by Azure at https://github.com/Azure/ai-toolkit-iot-edge/tree/master/IoT%20Edge%20anomaly%20detection%20tutorial
-------------------
-- This folder provides both the training file and the code run in the docker container when the ML service is deployed to azure containers.
The samdetection_train.py file needs sklearn, numpy and pandas libraries.
docker_runModule needs azureml, sklearn, numpy, pandas and pickle libraries. This is the code triggered when the funtions calls the container service.
The configuration section contains the Jupyter notebook used to setup the cloud services needed for the machine learning module.
